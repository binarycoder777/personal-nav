import{s as d}from"./supabase.DT4R6HVW.js";async function s(t){try{const{error:e}=await d.from("t_nav_contribute").insert(t);if(e)throw e;return!0}catch(e){throw console.error("Contribute error:",e),e}}const r=document.getElementById("theme-toggle");r&&r.addEventListener("click",()=>{document.documentElement.classList.toggle("dark");const t=document.documentElement.classList.contains("dark");localStorage.setItem("theme",t?"dark":"light")});const a=localStorage.getItem("theme")||"light";a==="dark"&&document.documentElement.classList.add("dark");const n=document.getElementById("contribute-modal"),i=document.getElementById("contribute-btn"),l=document.getElementById("close-modal"),m=document.getElementById("cancel-btn"),u=document.getElementById("submit-btn"),c=document.getElementById("contribute-form");i?.addEventListener("click",()=>{n?.classList.remove("hidden"),document.body.style.overflow="hidden"});function o(){n?.classList.add("hidden"),document.body.style.overflow="",c?.reset()}l?.addEventListener("click",o);m?.addEventListener("click",o);n?.addEventListener("click",t=>{t.target===n&&o()});document.addEventListener("keydown",t=>{t.key==="Escape"&&!n?.classList.contains("hidden")&&o()});u?.addEventListener("click",async()=>{if(!c)return;const t=new FormData(c);try{await s({name:t.get("title"),url:t.get("url"),category:t.get("category"),description:t.get("description"),tag:t.get("tag"),image:t.get("image")}),alert("提交成功！感谢您的投稿，我们会尽快审核。"),o(),c.reset()}catch(e){console.error("Submit error:",e),alert("提交失败，请稍后重试")}});
